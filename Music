
import pyaudio
import numpy
import struct

class Music:

  def main():
    print('hi')
    getSound()

def getSound():

  CHUNK = 128
  p = pyaudio.PyAudio()
  rate = 44100
  RECORD_SECONDS = 2
  stream = p.open(format=pyaudio.paInt16, channels=1, rate=44100, input=True, frames_per_buffer=CHUNK)

  print("* recording")
  all = []
  for i in range(0, int(rate / CHUNK * RECORD_SECONDS)):
    data = stream.read(CHUNK, exception_on_overflow = False)
    
    all.append(data)
  print("* done recording")
  print(len(all))
  print(len(all[59]))
  print(len(all[60]))
  print(len(all[61]))
  #for dat in all:
    #print(numpy.frombuffer(dat, numpy.int16))



  #data = stream.read(CHUNK, exception_on_overflow = False)
  #print(numpy.frombuffer(data, numpy.int16)) # use external numpy module
  #print(struct.unpack('h'*CHUNK, data)) # use built-in struct module

  stream.stop_stream()
  stream.close()
  p.terminate()

Music.main()
